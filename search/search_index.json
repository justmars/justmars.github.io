{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Hi, I'm Mars and this is an attempt at a blog.</p> <p>The last time I tried a personal blog was the dawn of the internet. Google was a startup, Geocities was still alive, and Dreamweaver was a thing.</p> <p>I started to code again in 2019ish, sometime after law school. This is an attempt to record notes and things I've learned, in the futile hope that I don't forget them.</p> <p>I've documented some of the work done this last year into a format that hopefully can be understood by the general public.</p>"},{"location":"#pylts","title":"<code>pylts</code>","text":"<p>Use litestream sqlite to s3 (and back) inside a python script:</p> <pre><code>flowchart LR\n  subgraph fly.io\n    volume\n    app\n  end\n  subgraph aws\n    s3(s3 bucket)--pylts restore volume--&gt;app\n  end\n  subgraph local\n    db--\"litestream replicate (args)\"--&gt;s3\n    code--fly deploy--&gt;app\n  end</code></pre> <p>Documentation</p>"},{"location":"#corpus-unpdf","title":"<code>corpus-unpdf</code>","text":"<p>Extract SC-issued decision PDFs into contextualized lines:</p> Spotting the footnote area using a green box Convert image as preparatory step in page analysis <p>Documentation</p>"},{"location":"#citation-utils","title":"<code>citation-utils</code>","text":"<p>Extract citations of Philippine Supreme Court decisions from text.</p> Python<pre><code>&gt;&gt;&gt; text = \"\"\"&lt;em&gt;Gatchalian Promotions Talent Pool, Inc. v. Atty. Naldoza&lt;/em&gt;,\n    374 Phil 1, 10-11 (1999), citing: &lt;em&gt;In re Almacen&lt;/em&gt;,\n    31 SCRA 562, 600 (1970).; People v. Umayam, G.R. No. 147033, April 30, 2003;\n    &lt;i&gt;Bagong Alyansang Makabayan v. Zamora,&lt;/i&gt; G.R. Nos. 138570, 138572,\n    138587, 138680, 138698, October 10, 2000, 342 SCRA 449; Villegas &lt;em&gt;v.&lt;/em&gt;\n    Subido, G.R. No. 31711, Sept. 30, 1971, 41 SCRA 190;\"\"\"\n&gt;&gt;&gt; [c.dict(exclude_none=True) for c in Citation.extract_citations(text)]\n[\n{'docket_category': 'GR', 'docket_serial': '147033', 'docket_date': datetime.date(2003, 4, 30), 'docket': 'GR 147033, Apr. 30, 2003'},\n{'docket_category': 'GR', 'docket_serial': '138570', 'docket_date': datetime.date(2000, 10, 10), 'docket': 'GR 138570, Oct. 10, 2000', 'scra': '342 SCRA 449'},\n{'docket_category': 'GR', 'docket_serial': '31711', 'docket_date': datetime.date(1971, 9, 30), 'docket': 'GR 31711, Sep. 30, 1971', 'scra': '41 SCRA 190'},\n{'scra': '31 SCRA 562'},\n{'phil': '374 Phil 1'}\n]\n</code></pre> <p>Documentation</p>"},{"location":"#statute-trees","title":"<code>statute-trees</code>","text":"<p>Detect titles of Philippine statutes when found in text.</p> Python<pre><code># imagine messy legalese with citations\n&gt;&gt;&gt; text = \"\"\"\nA.M. No. 02-11-10-SC or the Rules on Declaration of Absolute;\nAdministrative Order No. 3 by enacting A.M. No. 99-10-05-0;\nParenthetically, under these statutes [referring to RA Nos. 965 and 2630]\nCommonwealth Act (C.A.) No. 613, otherwise known as\nthe &lt;em&gt;Philippine Immigration Act of 1940&lt;/em&gt;; see also\nRepublic Act No. 386\n\"\"\"\n&gt;&gt;&gt; from statute_patterns import extract_rules\n&gt;&gt;&gt; list(extract_rules(text))\n[Rule(cat='rule_am', id='02-11-10-sc'),\nRule(cat='rule_am', id='99-10-05-0'),\nRule(cat='ra', id='965'),\nRule(cat='ra', id='2630'),\nRule(cat='ca', id='613'),\nRule(cat='ra', id='386')]\n</code></pre> <p>Create nested representations of Philippine statutes, codified statutes, and general legal documents.</p> Python<pre><code>&gt;&gt;&gt;r = Rule(cat='ra', id='386') # assign the Rule to `r`\n&gt;&gt;&gt;r(&lt;path/to/statutes&gt;) # get the base path to `/statutes`\nStatuteDetails(\ncreated=1665225124.0644598,\nmodified=1665225124.0644598,\nrule=Rule(cat='ra', id='386'),\ntitle='Republic Act No. 386',\ndescription='An Act to Ordain and Institute the Civil Code of the Philippines',\nid='ra-386-june-18-1949',\nemails=['maria@abcxyz.law', 'fernando@abcxyz.law'],\ndate=datetime.date(1949, 6, 18),\nvariant=1,\nunits=[\n{\n'item': 'Container 1',\n'caption': 'Preliminary Title',\n'units': [\n{\n'item': 'Chapter 1',\n'caption': 'Effect and Application of Laws',\n'units': [\n{\n'item': 'Article 1',\n'content': 'This Act shall be known as the \"Civil Code of the Philippines.\" (n)\\n'\n},\n{\n'item': 'Article 2',\n'content': 'Laws shall take effect after fifteen days following the completion of their publication either in the Official Gazette or in a newspaper of general circulation in the Philippines, unless it is otherwise provided. (1a)\\n'\n},\n...\n]\n},\n...\n]\n},\n...\n],\ntitles=[\nStatuteTitle(\nstatute_id='ra-386-june-18-1949',\ncategory='alias',\ntext='New Civil Code'\n),\nStatuteTitle(\nstatute_id='ra-386-june-18-1949',\ncategory='alias',\ntext='Civil Code of 1950'\n),\nStatuteTitle(\nstatute_id='ra-386-june-18-1949',\ncategory='official',\ntext='An Act to Ordain and Institute the Civil Code of the Philippines'\n),\nStatuteTitle(\nstatute_id='ra-386-june-18-1949',\ncategory='serial',\ntext='Republic Act No. 386'\n)\n]\n)\n</code></pre> <p>Documentation</p>"},{"location":"#sqlpyd","title":"<code>sqlpyd</code>","text":"<p>Use sqlite-utils attributes in pydantic models. The models are the schema for content outputted from citation-utils and statute-trees:</p> Python<pre><code># TableConfig is a wrapper around `pydantic.BaseModel`\n# `col`, `fts`, and `index` attributes utilize sqlite-utils functions\nclass RegularName(TableConfig):\nfull_name: str | None = Field(None, col=str, fts=True, index=True)\nfirst_name: str = Field(..., max_length=50, col=str, fts=True)\nlast_name: str = Field(..., max_length=50, col=str, fts=True, index=True)\nsuffix: Suffix | None = Field(None, max_length=4, col=str)\nclass Config:\nuse_enum_values = True\n</code></pre> <p>Documentation</p>"},{"location":"#corpus-x","title":"<code>corpus-x</code>","text":"<p>corpus-x, made with sqlpyd models, generates a sqlite database of Philippine legal content:</p> <pre><code>flowchart LR\ncorpus_pax--api---&gt;x\ncorpus_base--copy---&gt;x\nop_stat(statutes in opinions)&lt;--after prerequisites--&gt;x\nop_cite(citations in opinions)&lt;--after prerequisites--&gt;x\nstatutes--create trees--&gt;x\ncodifications--create trees--&gt;x\nx(corpus-x)--&gt;db[(sqlite.db)]</code></pre> <p>Documentation</p>"},{"location":"#lawdata","title":"<code>lawData</code>","text":"<p>corpus-x can be queried via lawData, a Datasette instance:</p> <p></p> <p>Documentation</p>"},{"location":"#lawsql","title":"<code>lawSQL</code>","text":"<p>While lawData content can be accessed via third-party API calls, it's interface isn't intended for public consumption.</p> <p>To make the UI more palatable, we need a more UI-driven site. Hence, lawSQL (built with Django, styled with TailwindCSS).</p> <p></p> <p>Website</p>"},{"location":"about/","title":"About","text":""},{"location":"about/#stack","title":"Stack","text":"Aspect Choice, ordered by preference Base Python, SQL, JS Web Django, FastAPI CSS TailwindCSS, Bootstrap JS htmx, hyperscript Database sqlite, postgresql Data Datasette, pydantic, sqlite-utils Templating DTL, Jinja Docs mkdocs, mkdocstrings, mkdocs-material DevOps CLI flyctl, litestream"},{"location":"about/#tech-related-work","title":"Tech-Related Work","text":"Work Organization Description <code>CEO</code> Apptitude Info Tech Solutions, Inc. Know-your-learner-based learning management system with certificates issued on private blockchain node <code>CEO</code> Choose Coffee or Code, Inc. Bespoke digital solutions including inventory management, booking systems, etc."},{"location":"about/#law-based-publications","title":"Law-Based Publications","text":"Topic Title Remote Notarization Notarization in the New Normal: White Paper on Remote Online Notarization in the Philippines Telco Competition Telconopoly: Overthrowing the Shadow of Regulatory Capture and Opportunism in Philippine  Telecommunications through Effective Competition Policy Virtual Propery Virtual Property: A Modified Usufruct of Intangibles"},{"location":"about/#academic-background","title":"Academic Background","text":"Degree Institution <code>Computer Science</code> University of the Philippines <code>Law</code> University of the Philippines"}]}